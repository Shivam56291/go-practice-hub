{{ define "notes/show.html"}} {{template "layouts/header.html" .}}

<script>
  function sendDelete(event, href) {
    if (!confirm("Are you sure you want to delete this note?")) return;
    var xhttp = new XMLHttpRequest();
    event.preventDefault();
    xhttp.onreadystatechange = function () {
      if (this.readyState === 4) {
        window.location.replace(this.responseURL);
      }
    };
    xhttp.open("DELETE", href, true);
    xhttp.send();
  }
</script>

<div class="container mt-5">
  {{ with .note}}
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-4">
          <li class="breadcrumb-item"><a href="/notes">My Notes</a></li>
          <li class="breadcrumb-item active" aria-current="page">{{.Name}}</li>
        </ol>
      </nav>

      <div
        class="card border-0 shadow-lg"
        style="animation: fadeIn 0.5s ease-out"
      >
        <div
          class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center pt-4 px-4"
        >
          <h2 class="card-title fw-bold text-dark mb-0">{{.Name}}</h2>
          <div class="text-muted small">
            {{.UpdatedAt.Format "Jan 02, 2006"}}
          </div>
        </div>
        <div class="card-body p-4">
          <p
            class="card-text lead"
            style="white-space: pre-wrap; line-height: 1.8"
          >
            {{.Content}}
          </p>
        </div>
        <div class="card-footer bg-transparent border-top mt-3 p-4">
          <div class="d-flex justify-content-end gap-2">
            <a href="/notes/edit/{{.ID}}" class="btn btn-outline-primary">
              Edit Note
            </a>
            <a
              href="/notes/{{.ID}}"
              class="btn btn-outline-danger"
              onclick="sendDelete(event, this.href)"
            >
              Delete Note
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  {{end}}
</div>

{{template "layouts/footer.html" .}} {{end}}
